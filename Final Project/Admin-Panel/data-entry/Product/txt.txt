


app.post('/product-panel_detailes', function(req, res){
    const con = mysql.createConnection({
        host: "localhost",
        user: "root",
        password: "",
        database: "product"
    });

    const { productName, ProductCount, productType, ingredients, diseaseName, weight, companyName, age, price, discount, publishedDate, productDetails, photo } = req.body;

    const values = [
        [productName, ProductCount, productType, ingredients, diseaseName, weight, companyName, age, price, discount, publishedDate, productDetails, photo]
    ];

    con.connect(function(err) {
        if (err) {
            console.log(err);
            res.status(500).send('Internal Server Error');
            return;
        }
        const sql = "INSERT INTO product_panel_database (productName, ProductCount, productType, ingredients, diseaseName, weight, companyName, age, price, discount, publishedDate, productDetails, photo) VALUES ?";
        
        con.query(sql, [values], function(err, result) {
            if (err) {
                console.log(err);
                res.status(500).send('Internal Server Error');
            } else {
                console.log('New panel entry Id:', result.insertId);


                const { id } = req.body;
                const deleteSql = "DELETE FROM panel_info WHERE id=?";
                con.query(deleteSql, [id], function(error, result) {
                    if (error) {
                        console.log(error);
                        res.status(500).send('Internal Server Error');
                    } else {
                        console.log("Data deleted from panel_info table successfully");
                        res.redirect('/Ingredients-panel-detailes'); // Redirect after successful deletion
                    }
                });
            }
        });
    });
});
